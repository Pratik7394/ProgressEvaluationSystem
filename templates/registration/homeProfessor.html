<!DOCTYPE html>

{% load staticfiles %}
{% load static %}

<html lang="en">

{#<html>#}
<head>

    <!-- Dont remove this: Divyarth Singh -->
    <!-- Site made with Mobirise Website Builder v4.9.7, https://mobirise.com -->

    {#    <meta charset="UTF-8">#}
    {#    <meta http-equiv="X-UA-Compatible" content="IE=edge">#}
    {#    <meta name="generator" content="Mobirise v4.9.7, mobirise.com">#}
    {#    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">#}
    {#    <link rel="shortcut icon" href="{% static 'assets/images/logo2.png' %}" type="image/x-icon">#}
    {#    <meta name="description" content="">#}
    <br>
    <title>Hello {{ sessionFullName }}</title>
    <link rel="stylesheet" href="{% static 'assets/web/assets/mobirise-icons/mobirise-icons.css' %}">
    <link rel="stylesheet" href="{% static 'assets/tether/tether.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/bootstrap/css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/bootstrap/css/bootstrap-grid.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/bootstrap/css/bootstrap-reboot.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/dropdown/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'assets/theme/css/style.css' %}">
    <link rel="stylesheet" href="{% static 'assets/mobirise/css/mbr-additional.css' %}" type="text/css">


    <style>


        {#table td.first th.first {#}
        {#    display: none;#}

        table.tbl tr td:first-child {
            display: none;
        }

        .bg {
            background-color: floralwhite;
        }

        .row-bottom-margin {
            margin-bottom: 10px;
        }

        div.ex1 {
            width: 1200px;
            margin: auto;
        {#border: 3px solid #73AD21;#}
        }

        p.dashed {
            border-style: dashed;
        }

        table, td, th {
            border: 4px solid #19334d;
            text-align: left;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th {
            padding: 14px;
            background-color: floralwhite;
            color: black;
        }

        td {
            padding: 5px;
            background-color: white;
            color: black;
        }

        th, td {
            font-size: 80%;
            font-weight: 400;
        }

        tr:hover td {
            background-color: floralwhite;
        }
    </style>

    <style>
        html {
            overflow-y: scroll;
        }
    </style>

    <script>
        function downloadCSV(csv, filename) {
            var csvFile;
            var downloadLink;

            // CSV file
            csvFile = new Blob([csv], {type: "text/csv"});

            // Download link
            downloadLink = document.createElement("a");

            // File name
            downloadLink.download = filename;

            // Create a link to the file
            downloadLink.href = window.URL.createObjectURL(csvFile);

            // Hide download link
            downloadLink.style.display = "none";

            // Add the link to DOM
            document.body.appendChild(downloadLink);

            // Click download link
            downloadLink.click();

        }

        function exportTableToCSV(filename) {
            var csv = [];
            var rows = document.querySelectorAll("table tr");

            for (var i = 0; i < rows.length; i++) {
                var row = [], cols = rows[i].querySelectorAll("td, th");

                for (var j = 0; j < cols.length; j++)
                    row.push(cols[j].innerText);

                csv.push(row.join(","));
            }

            // Download CSV file
            downloadCSV(csv.join("\n"), filename);
        }
    </script>

    <script>
        function sortTable(n) {
            var table, rows, switching, i, x, y, shouldSwitch, dir, switchcount = 0;
            table = document.getElementById("myTable");
            switching = true;
            //Set the sorting direction to ascending:
            dir = "asc";
            /*Make a loop that will continue until
            no switching has been done:*/
            while (switching) {
                //start by saying: no switching is done:
                switching = false;
                rows = table.rows;
                /*Loop through all table rows (except the
                first, which contains table headers):*/
                for (i = 1; i < (rows.length - 1); i++) {
                    //start by saying there should be no switching:
                    shouldSwitch = false;
                    /*Get the two elements you want to compare,
                    one from current row and one from the next:*/
                    x = rows[i].getElementsByTagName("TD")[n];
                    y = rows[i + 1].getElementsByTagName("TD")[n];
                    /*check if the two rows should switch place,
                    based on the direction, asc or desc:*/
                    if (dir == "asc") {
                        if (x.innerHTML.toLowerCase() > y.innerHTML.toLowerCase()) {
                            //if so, mark as a switch and break the loop:
                            shouldSwitch = true;
                            break;
                        }
                    } else if (dir == "desc") {
                        if (x.innerHTML.toLowerCase() < y.innerHTML.toLowerCase()) {
                            //if so, mark as a switch and break the loop:
                            shouldSwitch = true;
                            break;
                        }
                    }
                }
                if (shouldSwitch) {
                    /*If a switch has been marked, make the switch
                    and mark that a switch has been done:*/
                    rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                    switching = true;
                    //Each time a switch is done, increase this count by 1:
                    switchcount++;
                } else {
                    /*If no switching has been done AND the direction is "asc",
                    set the direction to "desc" and run the while loop again.*/
                    if (switchcount == 0 && dir == "asc") {
                        dir = "desc";
                        switching = true;
                    }
                }
            }
        }
    </script>

</head>
<body>


<section class="menu cid-rmqZR6lSw2" once="menu" id="menu1-6">

    <nav class="navbar navbar-expand beta-menu navbar-dropdown align-items-center navbar-fixed-top navbar-toggleable-sm">
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse"
                data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
        </button>
        <div class="menu-logo">
            <div class="navbar-brand">
                <span class="navbar-logo">
                    <a href="{% url 'professor:professorHome' %}">
                         <img src="{% static 'assets/images/logo2.png' %}" alt="PhD Evaluation" style="height: 3.8rem;">
                    </a>
                </span>
                <span class="navbar-caption-wrap">
                    <a class="navbar-caption text-white display-4" href="{% url 'professor:professorHome' %}">
                        PhD Evaluation
                    </a>
                </span>
                <span class="navbar-caption-wrap">
                    <a class="navbar-caption text-white display-4" href="{% url 'registration:userLogout' %}">
                        Logout
                    </a>
                </span>
            </div>
        </div>
    </nav>

</section>

<!-- Dont remove this: Divyarth Singh -->
{#<section class="engine"><a href="https://mobirise.info/j">website templates</a></section>#}

<section class="cid-qTkA127IK8 mbr-fullscreen mbr-parallax-background" id="header2-1">
    {#    <div class="container align-center">#}
    {#<div id="page-wrapper" style="display:inline-block;" class="container">#}
    <div class="row justify-content-md-center ex1">
        <div class="mbr-white col-md-10">
            <b>
                <blackcolor>
                    <div class="container align-center">
                        <div align="centre">
                            {% if user.is_authenticated %}
                                <h2 style="margin-top: 0"><u>Welcome Professor {{ sessionFullName }}</u></h2>
                            {% else %}
                                <h2>Welcome to the site!</h2>
                            {% endif %}
                        </div>
                    </div>
                    {% if messages %}
                        <p class="messages">
                            {% for message in messages %}
                                <p style="color:red">
                                    {{ message }}
                                </p>
                            {% endfor %}
                    {% endif %}
                </blackcolor>
            </b>

            {% load widget_tweaks %}

            <form method="get">
                <div class="well bg">
                    <blackcolor>
                        <h4 style="margin-top: 0">Filter</h4>
                    </blackcolor>
                    <blackcolor>
                        <div class="row row-bottom-margin">

                            {% if fullname is not '' %}

                                <div class="form-group col-sm-1 col-md-3">
                                    Name:
                                    <p class="dashed">
                                        {% render_field filter.form.fullname class="form-control" value=fullname %}
                                    </p>
                                </div>

                            {% else %}

                                <div class="form-group col-sm-1 col-md-3">
                                    Name:
                                    <p class="dashed">
                                        {% render_field filter.form.fullname class="form-control" %}
                                    </p>
                                </div>

                            {% endif %}

                            <div class="form-group col-sm-1 col-md-2">
                                GPA From:
                                <p class="dashed">
                                    {% render_field filter.form.current_GPA_gt class="form-control" %}
                                </p>
                            </div>
                            <div class="form-group col-sm-1 col-md-2">
                                GPA To:
                                <p class="dashed">
                                    {% render_field filter.form.current_GPA_lt class="form-control" %}
                                </p>
                            </div>
                            <div class="form-group col-sm-1 col-md-3">
                                Email:
                                <p class="dashed">
                                    {% render_field filter.form.Email class="form-control" %}
                                </p>
                            </div>
                            <div class="form-group col-sm-1 col-md-3">
                                Acaedmic Advisor:
                                <p class="dashed">
                                    {% render_field filter.form.Current_Academic_Advisor class="form-control" %}
                                </p>
                            </div>
                            <div class="form-group col-sm-1 col-md-3">
                                Research Advisor:
                                <p class="dashed">
                                    {% render_field filter.form.Current_Research_Advisor class="form-control" %}
                                </p>
                            </div>
                            <div class="form-group col-sm-1 col-md-3">
                                Questionnaire Status:
                                <p class="dashed">
                                    {% render_field filter.form.status class="form-control" %}
                                </p>
                            </div>

                            <div class="card-body">
                                <form class="form " role="form" autocomplete="off" method="get"
                                      enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <blackcolor>
                                        <button type="submit" class="button" name="clear">
                                            Search
                                        </button>
                                    </blackcolor>
                                </form>
                            </div>
                        </div>
                    </blackcolor>
                </div>
            </form>


            <form class="form" role="form" autocomplete="off" method="post"
                  enctype="multipart/form-data">
                {% csrf_token %}
                <table id="myTable">
                    <thead>
                    <tr>
                        <th></th>
                        <th onclick="sortTable(1)">Full Name</th>
                        <th onclick="sortTable(2)">GPA</th>
                        <th>Year In Program</th>
                        <th>Email</th>
                        <th onclick="sortTable(5)">Questionnaire Year</th>
                        <th>Academic Advisor</th>
                        <th>Research Advisor</th>
                        <th>Status</th>
                    </tr>
                    </thead>

                    <tbody>
                    {% for filter in filter.qs %}
                        <tr>
                            <td>
                                {% if filter.status == "Submitted For Review" or filter.status == "Review In Progress" or filter.status == "Review Submitted" %}
                                    <a href="{% url 'professor:submissionView' item_id=filter.id %}">
                                        <img src="{% static 'assets/images/open.png' %}" alt="not found" height=40
                                             width=40></a>
                                {% endif %}
                            </td>
                            <td>
                                <a href="{% url 'professor:filterName' item_id=filter.username.id %}">{{ filter.fullname }}</a>
                            </td>
                            <td>{{ filter.current_GPA }}</td>
                            <td>{{ filter.Current_Program_Year }}</td>
                            <td>{{ filter.Email }}</td>
                            <td>{{ filter.questionnaire_for }}</td>
                            <td>{{ filter.Current_Academic_Advisor }} </td>
                            <td>{{ filter.Current_Research_Advisor }} </td>
                            <td>
                                <div class="form-group">
                                    {% if filter.status == "Submitted For Review" or filter.status == "Review In Progress" or filter.status == "Review Submitted" %}
                                        <a href="{% url 'professor:submissionView' item_id=filter.id %}">
                                            {{ filter.status }} </a>
                                    {% else %}
                                        {{ filter.status }}
                                    {% endif %}
                                </div>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>


                <div align="left">
                    <div class="card-body">
                        <div class="form-group">
                            <button type="submit" class="button" name="export"
                                    onclick="exportTableToCSV('student_filter_result.csv')">
                                Export List
                            </button>
                            &nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                            <button type="submit" class="button" name="clear">
                                Clear Search
                            </button>
                        </div>

                    </div>
                </div>
            </form>
        </div>
    </div>
    {#</div>#}
</section>


<script src="{% static 'assets/web/assets/jquery/jquery.min.js' %}"></script>
<script src="{% static 'assets/popper/popper.min.js' %}"></script>
<script src="{% static 'assets/tether/tether.min.js' %}"></script>
<script src="{% static 'assets/bootstrap/js/bootstrap.min.js' %}"></script>
<script src="{% static 'assets/smoothscroll/smooth-scroll.js' %}"></script>
<script src="{% static 'assets/parallax/jarallax.min.js' %}"></script>
<script src="{% static 'assets/dropdown/js/script.min.js' %}"></script>
<script src="{% static 'assets/touchswipe/jquery.touch-swipe.min.js' %}"></script>
<script src="{% static 'assets/theme/js/script.js' %}"></script>

</body>

</html>